<html>
  <head>
    <title>$i18n.getText("hub.integration.jira.label")</title>
    <meta name="decorator" content="atl.admin" />
   		$webResourceManager.requireResource("com.blackducksoftware.integration.hub-jira:hub-jira-resources")
   		
  </head>
  <body>
    <form id="hub-jira" class="">
      <div id="aui-hub-message-field" class="aui-message hidden">
      	<p class="title">
        	<span id="aui-hub-message-title" class="aui-icon"></span>
        	<strong id="aui-hub-message-title-text"></strong>
    	</p>
    	<p id="aui-hub-message-text"></p>
      </div>
      
      <div id="saveSpinner"></div>
      
      <div id="error-message-field" class="error hidden">
      </div>
      
      <fieldset class="fieldSection">
      	 <legend class="legend"><i class="fa fa-minus-circle" onclick="toggleDisplay(this,'intervalArea');"> </i> $i18n.getText("hub.integration.jira.intervalSection.label")</legend>
      	 <div id="intervalArea">
		      <div class="field-group">
		        <label class="label" for="intervalBetweenChecks">$i18n.getText("hub.integration.jira.intervalBetweenChecks.label")</label>
		        <span class="aui-icon icon-required"> $i18n.getText("hub.integration.jira.required")</span>
		        <input type="text" id="intervalBetweenChecks" name="intervalBetweenChecks" class="longInput textStyle">
		      </div>
		      <div class="field-group">
		      	<div id="intervalBetweenChecksError" class="error hidden"></div>
		      </div>
	      </div>
      </fieldset>
      
		<fieldset class="fieldSection">
			<legend class="legend"><i class="fa fa-minus-circle" onclick="toggleDisplay(this,'ticketCriteriaArea');"> </i> $i18n.getText("hub.integration.jira.ticketCriteriaSection.label")</legend>
			<div id="ticketCriteriaArea">
			<table class="ticketCriteriaTable">
				<thead>
					<tr>
						<th class="label">$i18n.getText('hub.integration.jira.policyConditions.label')
						</th>
						<th class="label">$i18n.getText('hub.integration.jira.vulnerabilityStatusForCreation.label')
						</th>
						<th class="label">$i18n.getText('hub.integration.jira.vulnerabilityStatusForClosure.label')
						</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<div id="policyRuleSpinner" class="largeIcon fa fa-spinner fa-spin fa-fw"></div>
							<div id="policyRuleTicketCreation" class="ticketCriteriaSection">
							</div>
				  		</td>
				  		<td>
				  			<div id="vulnerabilityTicketCreation" class="ticketCriteriaSection">
					  			N/A
							</div>
				  		</td>
				  		<td>
				  			<div id="vulnerabilityTicketClosure" class="ticketCriteriaSection">
					  			N/A
							</div>
				  		</td>
	      			</tr>
	      			<tr>
	      				<td>
					      	<div id="policyRulesError" class="error hidden"></div>
					    </td>
					    <td>
					      	<div id="" class="error hidden"></div>
					    </td>
					    <td >
					      	<div id="" class="error hidden"></div>
					    </td>
	      			</tr>
      			</tbody>
      		</table>	
      		</div>
      	</fieldSet>
      	
      
		<fieldset class="fieldSection">
      	  <legend class="legend"><i class="fa fa-minus-circle" onclick="toggleDisplay(this,'mappingArea');"> </i> $i18n.getText("hub.integration.jira.hubProjectMappingSection.label") </legend>
			<div id="mappingArea">
			  <label class="label" for="hubProjectMappingContainer">$i18n.getText("hub.integration.jira.hubProjectMappings.label")</label>
			  <span class="aui-icon icon-required"> $i18n.getText("hub.integration.jira.required")</span>
			  <div class="field-group">
			  	<div id="hubProjectMappingsError" class="error hidden"></div>
			  </div>
			  	<table width="100%" id="hubProjectMappingContainer" class="mappingContainer">
			  	  <div id="projectMappingSpinner" class="largeIcon fa fa-spinner fa-spin fa-fw"></div>
				  <tr name="hubProjectMappingElement" id="hubProjectMappingElement" class="field-group">
				  	<td>
				  		<input onclick="removeMappingElement(this);" type="button" value="$i18n.getText('hub.integration.jira.removeProjectMapping.label')" class="aui-button aui-button-primary">
				  	</td>
				    <td>
				    	<input class="longInput textStyle" type="text" name="jiraProject" list="jiraProjects" projectKey="" oninput="onMappingInputChange(this);">
						<datalist id="jiraProjects">
						</datalist>
						<div id="jiraProjectError">
				    	</div>
				    </td>
				    <td> = </td>
				    <td>
				    	<input class="longInput textStyle" type="text" name="hubProject" list="hubProjects" projectKey="" oninput="onMappingInputChange(this);">
						<datalist id="hubProjects">
						</datalist>
				    </td>
				    <td id="mappingStatus">
				    <td>
				  </tr>
				</table>
			</div>
		</fieldset>
		
      <input onclick="addNewMappingElement('hubProjectMappingElement');" type="button" value="$i18n.getText('hub.integration.jira.addProjectMapping.label')" class="aui-button aui-button-primary">
      
	  <input onclick="updateConfig(); startProgressSpinner();" type="button" value="$i18n.getText('hub.integration.jira.save.label')" class="aui-button aui-button-primary">
    </form>
  </body>
</html>